# API для управления организациями (с Docker)

## Установка и запуск через Docker
#### 1. Клонируйте репозиторий
```bash
Copy code
git clone https://github.com/yourusername/organization-api.git
cd organization-api
```

#### 2. Соберите Docker образы
Запустите команду для сборки Docker-образов:

```bash
Copy code
docker-compose build
```
#### 3. Запустите контейнеры
Запустите все сервисы с помощью Docker Compose:

```bash
Copy code
docker-compose up -d
```

Приложение Laravel: http://localhost

#### 4. Выполните миграции и сидеры
После запуска контейнеров, нужно выполнить миграции и сидеры:

Подключитесь к контейнеру приложения:

```bash
Copy code
docker-compose exec app bash
```

Выполните миграции и сидеры для наполнения базы данных:

```bash
Copy code
php artisan migrate --seed
```

5. Получите доступ к API
Теперь API будет доступно по адресу: http://localhost.

Использование API
Аутентификация
Для работы с API необходимо передавать API ключ в заголовке всех запросов:

API_KEY: ваш-api-ключ
API ключ можно настроить в файле .env:

env
Copy code
```
API_KEY=ваш-реальный-api-ключ
```

## Дополнительно
Остановка контейнеров
Чтобы остановить контейнеры:

```bash
Copy code
docker-compose down
```

Логи контейнеров
Чтобы просматривать логи приложения, используйте команду:

Тестирование
Запустите тесты с помощью PHPUnit в контейнере:

```bash
Copy code
docker-compose exec app bash
php artisan test
```

## Структура вашего проекта
Ваши контейнеры используют следующие пути:

#### 1. Получить организации по зданию
Метод: GET
URL: /api/organizations/building/{buildingId}
Описание: Получить все организации, связанные с указанным зданием по его ID.
Параметры:
buildingId (integer) — ID здания.
Ответ: JSON массив организаций.
#### 2. Получить организации по виду деятельности
Метод: GET
URL: /api/organizations/activity/{activityId}
Описание: Получить все организации, относящиеся к указанному виду деятельности.
Параметры:
activityId (integer) — ID вида деятельности.
Ответ: JSON массив организаций.
#### 3. Получить организации по имени вида деятельности
Метод: GET
URL: /api/organizations/activity-name
Описание: Получить все организации, относящиеся к виду деятельности по его названию (поиск по имени).
Параметры:
activity_name (string) — Название вида деятельности.
Ответ: JSON массив организаций.
#### 4. Получить организацию по ID
Метод: GET
URL: /api/organization/{id}
Описание: Получить информацию об организации по её ID.
Параметры:
id (integer) — ID организации.
Ответ: JSON объект организации.
#### 5. Поиск организаций по имени
Метод: GET
URL: /api/organizations/search/{name}
Описание: Найти организации, название которых частично совпадает с переданным.
Параметры:
name (string) — Часть или полное название организации.
Ответ: JSON массив организаций.
#### 6. Получить организации в радиусе от заданной точки
Метод: GET
URL: /api/organizations/near
Описание: Получить список организаций в пределах заданного радиуса от указанной точки на карте.
Параметры:
latitude (float) — Широта точки.
longitude (float) — Долгота точки.
radius (float) — Радиус поиска в километрах.
Ответ: JSON массив организаций.

Приложение Laravel монтируется в контейнер app из локальной директории ./nebus-tz:
Исходный код: ./nebus-tz → /var/www/html в контейнере
Настройки Nginx монтируются в контейнер nginx из ./docker/nginx/conf/custom.conf → /etc/nginx/conf.d/default.conf в контейнере.
База данных MySQL использует папку ./mysql-init для инициализации данных.
Теперь всё настроено для работы через Docker. Запуск сервиса не требует дополнительной настройки, достаточно выполнить docker-compose up, и все контейнеры автоматически запустятся.
